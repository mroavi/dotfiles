# Documentation:
# - https://godoc.org/github.com/gokcehan/lf

# Example lfrc (by Brodie Robertson):
# - https://github.com/BrodieRobertson/dotfiles/blob/master/config/lf/lfrc

# Options
set previewer '~/dotfiles/lf/.config/lf/pv.sh'
set preview
set drawbox
set icons
set ignorecase

# Custom commands
cmd mkdir %printf "directory name: " && read ans && mkdir $ans
cmd touch %printf "file name: " && read ans && touch $ans

# fasd integration
cmd fasd ${{
   res="$(fasd -dl | grep -iv cache | fzf 2>/dev/tty | sed 's/\\/\\\\/g;s/"/\\"/g')"
   if [ -d "$res" ]; then
      cmd="cd"
   else
      cmd="select"
   fi
 lf -remote "send $id $cmd \"$res\""
 }}

# Open with $EDITOR or xdg-open based on type of file
cmd open ${{
    case $(file --mime-type $f -b) in
        text/*) $EDITOR $fx;;
        *) for f in $fx; do xdg-open $f > /dev/null 2> /dev/null & done;;
    esac
}}

# Same as above, but needed to make it work with nvim's lf plugin
# (nvim's lf plugin hijacks the default open command)
cmd myopen ${{
    case $(file --mime-type $f -b) in
        text/*) $EDITOR $fx;;
        *) for f in $fx; do xdg-open $f > /dev/null 2> /dev/null & done;;
    esac
}}

# Remove some default mappings
map d
map y
map v

# Mappings
map dd      delete
map yy      copy
map x       cut
map p       paste
map r       rename
map v       toggle
map c       clear
map u       unselect
map <esc>   quit
map .       set hidden!
map ~       cd ~
map <enter> open
map o       myopen
map z       fasd
